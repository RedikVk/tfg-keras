%% Los margenes, tipo de hoja y estilo BOOK
\documentclass[a4paper,11pt,twoside,openright,titlepage]{book}
\usepackage[utf8]{inputenc}
\usepackage{listings}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{subcaption}
\usepackage{enumitem}
\usepackage{multicol}

\usepackage[nodisplayskipstretch]{setspace} \setstretch{1}
\let\oldv\verbatim
\def\verbatim{\par\setstretch{0.6}\oldv}

\setlength{\belowcaptionskip}{-8pt}


\usepackage[a4paper,left=1in,right=1in,top=0.6in]{geometry}

%\usepackage[T1]{fontenc}    %Ineterprete de tildes
%\usepackage[Latin1]{inputenc}
\usepackage{amsmath,amssymb}    %Paquete de entornos matematicos

\usepackage{natbib}
\usepackage[english,spanish]{babel}
%\selectlanguage{spanish}
\usepackage{graphicx}
\usepackage{psfrag}
%\usepackage{quotchap}
\usepackage{epsfig}
%\usepackage[all]{xy}

\usepackage{epsfig}
\usepackage{makeidx}
\usepackage{ifthen}
\usepackage{multicolpar}    %Para poner texto en columnas en plan articulo intercalado con texto normal
%\usepackage{multicol,multirow}

\usepackage{url}        %Para direcciones web
%\usepackage{marvosym}   %Para imprimir el simbolo de \EUR euro
%\usepackage{eurosym}   %Para imprimir el simbolo de \euro euro
\usepackage{fancybox}   %Para tablas con bordes redondeados


%% Modificacion de la plantilla para adaptarla a los requisitos de PFC
\usepackage{fancyhdr}
\pagestyle{fancy}
%%% Cabeceras y pies de pagina
\fancyhead[CE,CO]{\emph{\titulo}}
\fancyhead[LE,LO,RE,RO]{}
\fancyfoot[LE,RO]{\thepage}
\fancyfoot[CE,CO]{\leftmark}

\renewcommand{\footrulewidth}{.6pt}


%Definiciones de funciones para los titulos
\newlength\salto
\setlength{\salto}{3.5ex plus 1ex minus .2ex}

\newlength\resalto
\setlength{\resalto}{2.3ex plus.2ex}

\newcommand{\lsection}[1]
                {\section{#1}
                \vskip-.9\resalto   %%%% Aqui reculo el posible salto por defecto de \section
                \hrule
                \vskip+.9\salto}  %%%% vuelvo ha realizar el salto (puedes poner otra vez el 90%)


%Para imagenes de entornos estaticos \captionFigure{Texto Caption}{Texto Label}
\newcommand{\captionFigure}[2]{
    \refstepcounter{figure}
    \centerline{Figura \thefigure: #1 \label{#2}}
    \addcontentsline{lof}{section}{\thefigure.\ #1\label{#2}}
}

%Para imagenes de entornos estaticos \NOcaptionFigure{Texto Caption}{Texto Label} "No escribe el caption"
\newcommand{\NOcaptionFigure}[2]{
    \refstepcounter{figure}
    \addcontentsline{lof}{figure}{\thefigure.\ #1\label{#2}}
}


%% Datos del PFC
\newcommand{\titulo}{Herramientas modernas en redes neuronales: la librería keras}
\newcommand{\autor}{Autor: Carlos Antona Cortés}
\newcommand{\director}{Nombre Apellido1 Apellido2}
\newcommand{\tutor}{Tutor: José Ramón Dorronsoro Ibero}
%\newcommand{\ponente}{Ponente: Nombre Apellido1 Apellido2}
\newcommand{\vocal}{Nombre Apellido1 Apellido2}
\newcommand{\vocalsup}{Nombre Apellido1 Apellido2}
\newcommand{\presidente}{Nombre Apellido1 Apellido2}
\newcommand{\presidentesup}{Nombre Apellido1 Apellido2}
\newcommand{\fecha}{Enero 2017}
\newcommand{\carrera}{Grado en Ingenieria Informática}


\usepackage{color}
\usepackage{xcolor}
\usepackage{courier}
\usepackage{listingsutf8}
\lstset{
backgroundcolor=\color{white}, % choose the background color
basicstyle=\scriptsize\ttfamily, % size of fonts used for the code
breaklines=true, % automatic line breaking only at whitespace
captionpos=b, % sets the caption-position to bottom
commentstyle=\color{green}, % comment style
escapeinside={\%*}{*)}, % if you want to add LaTeX within your code
keywordstyle=\color{blue}, % keyword style
stringstyle=\color{magenta}, % string literal style
showstringspaces=false,
extendedchars=false,
inputencoding=utf8,
}


\begin{document}
\setlength{\baselineskip}{18pt}  %% Espacio interlinea
\setlength{\parskip}{6pt plus 1pt minus 1pt} %% Espacio interparrafo

\input{portada}

\frontmatter %Define el cuerpo inicial del libro en numeracion con letras romanas

\input{primera_pag}

\input{resumen}

\input{agradecimientos}

\tableofcontents

\newpage \thispagestyle{empty} % Pagina vacia

\addcontentsline{toc}{chapter}{Indice de Figuras}    %Para que aparezca en el indice
\renewcommand{\listfigurename}{Indice de Figuras}
\listoffigures

\newpage \thispagestyle{empty} % Pagina vacia

\addcontentsline{toc}{chapter}{Indice de Tablas}    %Para que aparezca en el indice
\renewcommand{\listtablename}{Indice de Tablas}
\listoftables

\newpage \thispagestyle{empty} % Pagina vacia

\mainmatter %Define el cuerpo principal del libro numeracion normal.

% \input{preambulo}

\input{cap_intro}

\include{teoria_redes_neuronales}
\include{documentacion_keras}
\include{modelos_keras}
\include{cap_conclusiones}

\input{glosario}

\bibliographystyle{unsrt}   %plain pero ordenado en orden de aparacicion en documento principal
\bibliography{bibliografia}

\appendix   %Indicamos que lo que viene a continuacion son apendices

%\frontmatter %Para poner los anexos en numeros romanos

\input{anexo_manualuso}

%\input{anexo_maualprogramador}

%Hoja final en blanco
\newpage \thispagestyle{empty} % Pagina vacia

\end{document}
